(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{1145:(e,s,r)=>{"use strict";r.d(s,{A:()=>i});var a=r(5155),t=r(2115),o=r(5695);function i(e){let{onSuccess:s}=e,[r,i]=(0,t.useState)({usernameOrEmail:"",password:"",rememberMe:!1}),[m,n]=(0,t.useState)({}),[d,l]=(0,t.useState)(!1),u=(0,o.useRouter)(),c=()=>{let e={};return r.usernameOrEmail.trim()||(e.usernameOrEmail="Username or email is required"),r.password||(e.password="Password is required"),n(e),0===Object.keys(e).length},h=async e=>{if(e.preventDefault(),c()){l(!0);try{let e=await fetch("/api/v1/auth/login",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({username:r.usernameOrEmail,password:r.password,scope:r.rememberMe?"remember_me":""})});if(!e.ok){let s=await e.json();throw Error(s.detail||"Login failed")}let{access_token:a}=await e.json();(r.rememberMe?localStorage:sessionStorage).setItem("access_token",a),u.refresh(),s?s():u.push("/")}catch(e){n({submit:e instanceof Error?e.message:"Login failed"})}finally{l(!1)}}},b=e=>{let{name:s,value:r,type:a,checked:t}=e.target;i(e=>({...e,[s]:"checkbox"===a?t:r}))};return(0,a.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[m.submit&&(0,a.jsx)("div",{className:"text-red-500 text-sm",children:m.submit}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"usernameOrEmail",className:"block text-sm font-medium",children:"Username or Email"}),(0,a.jsx)("input",{type:"text",id:"usernameOrEmail",name:"usernameOrEmail",value:r.usernameOrEmail,onChange:b,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),m.usernameOrEmail&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:m.usernameOrEmail})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium",children:"Password"}),(0,a.jsx)("input",{type:"password",id:"password",name:"password",value:r.password,onChange:b,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),m.password&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:m.password})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"rememberMe",name:"rememberMe",checked:r.rememberMe,onChange:b,className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),(0,a.jsx)("label",{htmlFor:"rememberMe",className:"ml-2 block text-sm",children:"Remember me"})]}),(0,a.jsx)("button",{type:"submit",disabled:d,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:d?"Logging in...":"Login"})]})}},4080:(e,s,r)=>{Promise.resolve().then(r.bind(r,8007))},5695:(e,s,r)=>{"use strict";var a=r(8999);r.o(a,"useRouter")&&r.d(s,{useRouter:function(){return a.useRouter}})},8007:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>i});var a=r(5155),t=r(5695),o=r(1145);function i(){let e=(0,t.useRouter)();return(0,a.jsxs)("div",{className:"max-w-md mx-auto py-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Login"}),(0,a.jsx)(o.A,{onSuccess:()=>{e.push("/")}})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[441,684,358],()=>s(4080)),_N_E=e.O()}]);